(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{114:function(t,e,a){"use strict";a.r(e);var n=a(0),i=a.n(n),s=a(3),o=a.n(s),r=(a(41),a(4)),c=a(5),l=a(7),u=a(6),h=(a(42),a(43),a(2)),g=a(30),m=a.n(g),f=a(32),p=a.n(f),d=function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(r.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(t=e.call.apply(e,[this].concat(i))).state={images:[],tags:[],waiting:!1},t}return Object(c.a)(a,[{key:"updateTags",value:function(t){var e=this;fetch("/api/v0/image/".concat(t),{method:"GET"}).then((function(t){return t.json()})).then((function(a){if(""===a.tags)setTimeout(e.updateTags.bind(e),1e3,t);else{var n=e.state;n.tags=a.tags.split(","),n.waiting=!1,e.setState(n)}}))}},{key:"onDrop",value:function(t){var e=this,a=new FormData,n=this.state;n.images=[],n.tags=[],n.waiting=!0,this.setState(n),t.forEach((function(t){a.append("file",t),a.append("filename",t.name)})),fetch("/api/v0/image",{method:"POST",body:a}).then((function(t){return t.json()})).then((function(a){console.log(a);var n=e.state;n.images=t,e.setState(n),e.updateTags(a.id)}))}},{key:"render",value:function(){var t="";this.state.tags.length>0&&(t=this.state.tags.join(", "));var e="";this.state.waiting&&(e=i.a.createElement(m.a,{size:50,color:"#123abc",loading:this.state.loading}));return i.a.createElement("div",{className:"App"},i.a.createElement("br",null),i.a.createElement("b",null,"all images given to this site are saved and publicly available. Please use discretion"),i.a.createElement("h1",null,t),e,i.a.createElement(p.a,{withIcon:!0,buttonText:"Choose image",onChange:this.onDrop.bind(this),imgExtension:[".jpg",".gif",".png",".gif",".jpeg"],maxFileSize:5242880,withPreview:!0,singleImage:!0}),"")}}]),a}(n.Component),v=a(33),E=a.n(v),b=function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(t){var n;return Object(r.a)(this,a),(n=e.call(this,t)).state={tagWeights:{},maxCount:0},fetch("https://www.whatisthisapictureof.com/api/v0/images",{method:"GET"}).then((function(t){return t.json()})).then((function(t){var e=n.state;e.maxCount=0,t.images.forEach((function(t){t.tags.split(",").forEach((function(t){void 0===e.tagWeights[t]&&(e.tagWeights[t]=0),e.tagWeights[t]+=1,e.tagWeights[t]>e.maxCount&&(e.maxCount=e.tagWeights[t])}))})),n.setState(e)})),n}return Object(c.a)(a,[{key:"render",value:function(){var t=this,e=[];return Object.keys(this.state.tagWeights).forEach((function(a){var n=50*t.state.tagWeights[a]/t.state.maxCount+10;e.push(i.a.createElement("div",{key:a,style:{fontSize:n}},i.a.createElement("a",{href:"/images/"+a},a)))})),i.a.createElement(E.a,{className:"tag-cloud",style:{fontFamily:"sans-serif",fontSize:30,height:"500px",padding:5}},e)}}]),a}(n.Component),w=a(35),j=a.n(w),y=function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(t){var n;return Object(r.a)(this,a),(n=e.call(this,t)).state={images:[]},fetch("https://www.whatisthisapictureof.com/api/v0/images",{method:"GET"}).then((function(t){return t.json()})).then((function(t){var e=n.state;e.images=t.images,n.setState(e)})),n}return Object(c.a)(a,[{key:"render",value:function(){var t=[];return this.state.images.forEach((function(e){var a=e.tags.split(","),n=[];a.forEach((function(t){n.push({value:t,title:t})})),t.push({src:e.s3_path,thumbnail:e.s3_path,tags:n,caption:e.id})})),t.sort((function(t,e){return.5-Math.random()})),i.a.createElement(j.a,{images:t})}}]),a}(n.Component),O=function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(){return Object(r.a)(this,a),e.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return i.a.createElement(h.d,null,i.a.createElement(h.b,null,i.a.createElement(h.a,null,"Upload Image"),i.a.createElement(h.a,null,"Tag Cloud"),i.a.createElement(h.a,null,"All Uploaded Images")),i.a.createElement(h.c,null,i.a.createElement(d,null)),i.a.createElement(h.c,null,i.a.createElement(b,null)),i.a.createElement(h.c,null,i.a.createElement(y,null)))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},36:function(t,e,a){t.exports=a(114)},41:function(t,e,a){},42:function(t,e,a){}},[[36,1,2]]]);
//# sourceMappingURL=main.7786f904.chunk.js.map